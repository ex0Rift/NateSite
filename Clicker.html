<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clicker Game</title>
    <link rel="stylesheet" href="styleClicker.css">
    <link rel="icon" href="images/favicon.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>

    <img id="saver" class="Left" src="images/button.png">

    <a href="index.html">
        <button class="MainButton" onclick="saveData()">Go home</button>
    </a>
    <h1 id="ClickCounter">Clicks:0</h1>
    <p id="Display">1x per click | 0x per 10s</p>

    <div>
        <button class="Main" onclick="increment()"></button>
    </div>  
    
    <div>
        <button id="Extra" disabled onclick="multiplier()">Extra click - 10</button>
        <button id="Auto" disabled onclick="AutoAdd()">Extra AutoClick - 50</button>
        <button id="Speed" disabled onclick="HalfAuto()">half AutoClick speed - 100</button>
    </div>
    
    <div class="Rebirth">
        <div>
            <h2>Rebirth: 0</h2>
            <p>cost:2,000,000</p>
        </div>
        <button id="Rebirth" disabled>Coming Soon</button>
    </div>
    
    <footer>
        <a href="#" onclick="ClearData()">Clear save</a>
    </footer>


    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1317864573611683"
            crossorigin="anonymous"></script>
    <script>
        var count=0;
        var Increment=1;
        var ClickCost=10;
        var AutoCost = 50;
        var autoMultiplier = 0;
        var AutoSpeed=10000;
        var SpeedCost=100;
        var RebirthCost=2000000;
        
        
        var intervalId = setInterval(tick,AutoSpeed)
        
        function tick(){
            count+=autoMultiplier;
            updateDisplay()
            disabling()
            enabling()
        }
        
        
        function updateDisplay(){
            const ClickerCounter = document.getElementById("ClickCounter")
            const Display = document.getElementById("Display")
            Display.textContent = Increment + "x per click | " + autoMultiplier + "x per " + AutoSpeed/1000 + "s"
            ClickerCounter.textContent="Clicks:"+count.toLocaleString();
            document.getElementById("Extra").textContent="Extra Click - " + ClickCost;
            document.getElementById("Auto").textContent="Extra AutoClick - " + AutoCost;
            document.getElementById("Speed").textContent="half AutoClick speed - " + SpeedCost;
        }
        
        function disabling(){
            if (count<ClickCost){
                document.getElementById("Extra").disabled = true;
            }
            if (count<AutoCost){
                document.getElementById("Auto").disabled = true;
            }
            if (count<SpeedCost){
                document.getElementById("Speed").disabled = true;
            }
            if (count<RebirthCost){
                document.getElementById("Rebirth").disabled = true;
            }
        }
        function enabling(){
            if (count>=ClickCost){
                document.getElementById("Extra").disabled = false;
            }
            if (count>=AutoCost){
                document.getElementById("Auto").disabled = false;
            }
            if (count>=SpeedCost){
                document.getElementById("Speed").disabled = false;
            }
            if (count>=RebirthCost){
                document.getElementById("Rebirth").disabled = false;
            }
            
        }
        function increment(){
            navigator.vibrate(200);
            count+=Increment;
            updateDisplay()
            disabling()
            enabling()
        }
        function multiplier(){
            count -=ClickCost;
            Increment+=1;
            ClickCost+=10;
            document.getElementById("Extra").textContent="Extra Click - " + ClickCost;
            updateDisplay()
            disabling()
        }
        
        function AutoAdd(){
            count-=AutoCost;
            autoMultiplier+=1;
            AutoCost+=50;
            document.getElementById("Auto").textContent="Extra AutoClick - " + AutoCost;
            updateDisplay()
            disabling()
        }
        
        function HalfAuto(){
            count-=SpeedCost;
            SpeedCost+=100;
            AutoSpeed = AutoSpeed/2;
            document.getElementById("Speed").textContent="half AutoClick speed - " + SpeedCost;
            clearInterval(intervalId)
            intervalId=setInterval(tick,AutoSpeed)
            updateDisplay()
            disabling()
        }

        //Data handling

        setInterval(function(){
            const show = document.getElementById("saver");
            show.style.display ="block";
            setTimeout(() => {
                show.style.display = "none";
            },1000);
            saveData()
        },10000);
        
        function saveData(){
            localStorage.setItem('Count',count);
            localStorage.setItem('Increment',Increment);
            localStorage.setItem('ClickCost',ClickCost);
            localStorage.setItem('AutoCost',AutoCost);
            localStorage.setItem('autoMultiplier',autoMultiplier);
            localStorage.setItem('AutoSpeed',AutoSpeed);
            localStorage.setItem('SpeedCost',SpeedCost);
            localStorage.setItem('RebirthCost',RebirthCost);
        }
        function LoadData(){
            count = parseInt(localStorage.getItem('Count'));
            Increment = parseInt(localStorage.getItem('Increment'));
            ClickCost = parseInt(localStorage.getItem('ClickCost'));
            AutoCost = parseInt(localStorage.getItem('AutoCost'));
            autoMultiplier = parseInt(localStorage.getItem('autoMultiplier'));
            AutoSpeed = parseInt(localStorage.getItem('AutoSpeed'));
            SpeedCost = parseInt(localStorage.getItem('SpeedCost'));
            RebirthCost = parseInt(localStorage.getItem('RebirthCost'));
            updateDisplay()
        }
        
        function ClearData(){
            count=0;
            Increment=1;
            ClickCost=10;
            AutoCost = 50;
            autoMultiplier = 0;
            AutoSpeed=10000;
            SpeedCost=100;
            RebirthCost=2000000;
            localStorage.clear();
            updateDisplay()
        }
        
        
        let value = localStorage.getItem('AutoCost')
        if (!value){
            saveData()
        }
        window.onload = LoadData
    </script>

</body>
</html>